---
import Navigation from "../../components/Navigation.astro";
import { supa } from "../../lib/supabase";
import "../../styles/global.css";

export const prerender = false;

const { id } = Astro.params;

// Fetch student data
const { data: student } = await supa(Astro.locals)
  .from("college_students")
  .select("*")
  .eq("id", id!)
  .maybeSingle();

if (!student) {
  return Astro.redirect("/students");
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{student.first_name} {student.last_initial}. - Pro-Am Rankings</title>
  </head>
  <body class="bg-neutral-950 text-white">
    <Navigation />
    <main class="mx-auto max-w-4xl p-6">
      <h1 class="text-3xl font-bold mb-2">{student.first_name} {student.last_initial}.</h1>
      <p class="text-xl text-neutral-300">{student.gamertag}</p>
      
      <div class="mt-8">
        <a href="/students" class="text-blue-400 hover:text-blue-300">â† Back to Students</a>
      </div>
    </main>
  </body>
</html>